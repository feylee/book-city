"use strict";define(["jquery","template"],function(a,s){var c=window.localStorage,n=JSON.parse(c.getItem("searcharr"))||[];a.getJSON("/book/searchkey",function(e){var t=e.ads.concat(n);e.ads=t,a(".searchresult"),s(a(".searchtext").html(),e,".searchresult")}),a(".search-btn").on("click",function(){a(".searchresult").html("");var r=a.trim(a(this).prev().val());a.ajax({url:"/book/search",data:{title:r},dataType:"json",success:function(e){var t=e.items.filter(function(e,t){return new RegExp(r,"g").test(e.title)});console.log(t),t.length&&(n.push({ad_name:r}),c.setItem("searcharr",JSON.stringify(n))),s(a(".searchlist").html(),{items:t},".searchresult")}})})});